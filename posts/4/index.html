<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>BryanFu Blog</title>
  <meta name="author" content="BryanFu">

   <meta name="description" content="The Blog of BryanFu"> 
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://helloyokoy.github.io/posts/4/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="" rel="alternate" title="BryanFu Blog" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://helloyokoy.github.io/posts/4/">
  <meta property="og:title" content="BryanFu Blog">
  <meta property="og:description" content="The Blog of BryanFu">

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66019285-2', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      
      <div id="banner-image">
        <div class="layer">
          <div id="banner-text">
            <h1 class="page-title">BryanFu Blog</h1>
            <p class="page-desc">
              Less is More ~<br>
            </p>
            <br>
            <br>
            <div class="page-links center">
              <ul class="index-nav">
                  <li ><a href="/projects">Projects</a></li>
<li ><a href="/blog/archives">Archives</a></li>
<li ><a href="/blog/categories/ios/">iOS</a></li>
<li ><a href="/blog/categories/android/">Android</a></li>
<li ><a href="/blog/categories/nodejs/">NodeJS</a></li>
<li ><a href="/blog/categories/ruby/">Ruby</a></li>
<li ><a href="/blog/categories/other/">Other</a></li>
<li ><a href="/about">About</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content">
    <div class="blog-index" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="BryanFu Blog" />
    <meta itemprop="description" content="The Blog of BryanFu" />
    <meta itemprop="url" content="http://helloyokoy.github.io" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-07-11T17:25:27+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年7 月11 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/bundler/" itemprop="url">Bundler 的作用以及原理</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>原文：<a href="http://bundler.io/rationale.html">http://bundler.io/rationale.html</a></p>

<p>首先，你要在你应用根目录下一个叫Gemfile文件里声明这些依赖，它看起来是这个样子的：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class=""><span class="line">source 'https://rubygems.org'
</span><span class="line">
</span><span class="line">gem 'rails', '4.1.0.rc2'
</span><span class="line">gem 'rack-cache'
</span><span class="line">gem 'nokogiri', '~&gt; 1.6.1'</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这个Gemfile说明了这些事情：</p>

<p>首先，他告诉 bundler 默认是在Gemfile里指定的https://rubygems.org上来找 gem。如果你的一些 gem 需要从一个私有的 gem 服务器上获取，那么你可以为这些 gem 覆盖掉这个默认的源设置。</p>

<p>接着，你声明了一些依赖：</p>

<ul>
  <li>版本是4.1.0.rc2的rails</li>
  <li>任意版本的rack-cache</li>
  <li>版本是&gt;= 1.6.1但是&lt; 1.7.0的nokogiri</li>
</ul>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/bundler/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-07-10T21:52:44+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年7 月10 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/iosyi-lai-zhu-ru-kuang-jia-objection/" itemprop="url">iOS 依赖注入框架 Objection</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><blockquote>
  <p>objection 是一个轻量级的依赖注入框架，受Guice的启发，Google Wallet 也是使用的该项目。「依赖注入」是面向对象编程的一种设计模式，用来减少代码之间的耦合度。通常基于接口来实现，也就是说不需要new一个对象，而是通过相关的控制器来获取对象。2013年最火的PHP框架 laravel 就是其中的典型。</p>
</blockquote>

<p>假设有以下场景：ViewControllerA.view里有一个button，点击之后push一个ViewControllerB，最简单的写法类似这样：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class=""><span class="line">- (void)viewDidLoad
</span><span class="line">{
</span><span class="line">    [super viewDidLoad];
</span><span class="line">    UIButton *button = [UIButton buttonWithType:UIButtonTypeSystem];
</span><span class="line">    button.frame = CGRectMake(100, 100, 100, 30);
</span><span class="line">    [self.view addSubview:button];
</span><span class="line">}
</span><span class="line"> 
</span><span class="line">- (void)buttonTapped
</span><span class="line">{
</span><span class="line">    ViewControllerB *vc = [[ViewControllerB alloc] init];
</span><span class="line">    [self.navigationController pushViewController:vc animated:YES];
</span><span class="line">}</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这样写的一个问题是，ViewControllerA需要import ViewControllerB，也就是对ViewControllerB产生了依赖。依赖的东西越多，维护起来就越麻烦，也容易出现循环依赖的问题，而objection正好可以处理这些问题。</p>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/iosyi-lai-zhu-ru-kuang-jia-objection/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-06-27T16:58:31+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年6 月27 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/what-happend-when-you-browse-my-blog/" itemprop="url">当你浏览我的博客时计算机干了什么</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>在大学的时候, 我脑海里时常都蹦出对计算机的许多问号, 尤其是计算机是如何工作的, 为什么它如此强大, 越来越显著地改变了我们的生活.</p>

<p>随着知识的积累, OS, 进程, 线程, 计算机网络, web 开发, 一个个知识孤岛在某一天终于连接了起来, 形成了一个极为清晰的信息流.</p>

<p>我相信, 作为读者的你, 也会非常想弄明白其中原理, 或者已经弄明白但可能还有些一些疑问, 于是乎, 我将一个很常见的操作, 进行信息流分析, 尝试分层分析它们的每一步.</p>

<p>这个操作就是: 当你正在浏览我的这篇博客时, 计算机到底做了什么?</p>

<p>为了叙述方便, 我限定使用了 chrome 浏览器, nginx, unicorn, rails 来描述它们, 实际上, 这些组件都是可以替换的.</p>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/what-happend-when-you-browse-my-blog/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-06-22T20:08:03+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年6 月22 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/rubyyu-fa/" itemprop="url">Ruby语法</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><h3 id="section">语法</h3>
<ul>
  <li>
    <p>Ruby中的类以class开始 以end结束，类名首字母的约定是大写。</p>
  </li>
  <li>
    <p>Ruby中的方法以def开始 以end结束，方法名首字母的约定是小写。</p>
  </li>
  <li>
    <p>Ruby中的局部变量名首字母的约定是小写。</p>
  </li>
  <li>
    <p>Ruby中的构造函数名称为initialize。</p>
  </li>
  <li>
    <p>Ruby中的成员变量(实例变量)前导@符，在initialize里进行声明与初始化。</p>
  </li>
  <li>
    <p>Ruby中的属性用attr_writer和attr_reader声明，分别对应c#的set,get，使用了
attr_accessor是可读也可写</p>
  </li>
  <li>
    <p>Ruby中的全局变量前导$符。</p>
  </li>
  <li>
    <p>Ruby中的常数（常量）用大写字母开头，约定是全部大写。</p>
  </li>
  <li>
    <p>Ruby中任何的表达式都会返回值，</p>
  </li>
</ul>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/rubyyu-fa/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-06-18T22:25:55+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年6 月18 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/iosduo-xian-cheng/" itemprop="url">iOS多线程详解</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><h2 id="section">概述</h2>
<hr />

<p>在 iOS 中其实目前有 4 套多线程方案，他们分别是：</p>

<ul>
  <li>Pthreads</li>
  <li>NSThread</li>
  <li>GCD</li>
  <li>NSOperation &amp; NSOperationQueue</li>
</ul>

<p>所以接下来，我会一一讲解这些方案的使用方法和一些案例。在将这些内容的时候，我也会顺带说一些多线程周边产品。比如： 线程同步、 延时执行、 单例模式 等等。</p>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/iosduo-xian-cheng/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-06-12T12:11:15+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年6 月12 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/android-push/" itemprop="url">Android Push 方案</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><h2 id="gcmgoogle-cloud-messaging">方案一：使用GCM服务（Google Cloud Messaging）</h2>
<p>简介：</p>

<p>Google在Android上标配了自己的推送GCM（Google Cloud Messageing），可以帮助开发人员给他们的Android应用程序发送数据。它是一个轻量级的消息，告诉Android应用程序有新的数据要获取从服务器，或者它可能是一个消息，其中包含了4KB的payload data（像即时通讯这类应用程序可以直接使用该payload消息）。GCM服务处理排队的消息，并把消息传递到目标设备上运行的Android应用程序。</p>

<p>优点：</p>

<p>Google提供的服务、原生、简单，无需实现和部署服务端。</p>

<p>缺点：</p>

<ol>
  <li>
    <p>GCM要求Android系统必须是2.2以上的版本，所以对于不少2.2以前的系统没法推送</p>
  </li>
  <li>
    <p>国内服务不稳定。而且不少国内的终端厂商纷纷把Google的服务去掉，替换上自己的。</p>
  </li>
  <li>
    <p>需要用户绑定Google账号，但不少国内用户没有Google账号。</p>
  </li>
</ol>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/android-push/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-06-05T12:46:03+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年6 月5 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/write-best-code/" itemprop="url">如何编写更棒的代码</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>作为一个合格的程序员，有太多的理由促使你去编写干净利落且可读性强的代码。最重要的是因为你编写的代码，将来会有很多人一次次地阅读。当你有一天回过头来看自己的代码时，你就会明白编写优雅的代码是多么的重要。另外，如果别人来阅读你编写的代码，你是否想知道别人看到那些烂代码无比抓狂的感受。因此，花多一点的时间去编写优雅的代码，将来说不定会给你节省更多的时间。</p>

<p>那么，如何编写更棒的代码，下面是11条基本规则：</p>

<ol>
  <li>
    <p>保持方法简短扼要</p>
  </li>
  <li>
    <p>永远永远不要将同一个变量用于不同的目的</p>
  </li>
  <li>
    <p>尽可能让变量和方法的名称能够描述要实现的功能</p>
  </li>
  <li>
    <p>尽可能将变量定义在最靠近它们的地方</p>
  </li>
  <li>
    <p>不要出现让人费解的数字</p>
  </li>
  <li>
    <p>要像对待朋友一样对待你擅长的语言</p>
  </li>
  <li>
    <p>不要逆常规而行</p>
  </li>
  <li>
    <p>千万小心过早的优化代码</p>
  </li>
  <li>
    <p>要常常重构经过测试的代码</p>
  </li>
  <li>
    <p>不要沉溺于过度的设计技巧</p>
  </li>
  <li>
    <p>随时随地学习新的知识</p>
  </li>
</ol>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/write-best-code/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-05-07T15:14:36+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年5 月7 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/redis-huan-cun-fu-wu-qi-pei-zhi/" itemprop="url">Redis 缓存服务器配置</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>随着redis的发展，越来越多的架构用它取代了memcached作为缓存服务器的角色，它有几个很突出的特点：</p>

<ol>
  <li>除了Hash，还提供了Sorted Set, List等数据结构</li>
  <li>可以持久化到磁盘</li>
  <li>支持cluster (3.0)</li>
</ol>

<p>它的性能和memcached不相上下，再加上流行的其他组件（比如队列）也会用到redis，从架构简单出发，已经没有必要混用redis和memcached了。</p>

<p>写篇短文介绍一下用redis作为缓存服务器配置时候需要注意几个点。</p>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/redis-huan-cun-fu-wu-qi-pei-zhi/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-04-11T17:53:41+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年4 月11 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/leakcannei-xie-lu-jian-ce/" itemprop="url">LeakCanary内寸泄露检测</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><h2 id="leakcanary">LeakCanary</h2>

<p>Android 和 Java 内存泄露检测。</p>

<blockquote>
  <p>“A small leak will sink a great ship.” - Benjamin Franklin</p>
</blockquote>

<blockquote>
  <p>千里之堤， 毁于蚁穴。 – 《韩非子·喻老》</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/liaohuqiu/leakcanary/master/assets/screenshot.png" alt="alt text" title="Title" /></p>

<h4 id="demo">demo</h4>

<p>一个非常简单的 LeakCanary demo: <a href="https://github.com/liaohuqiu/leakcanary-demo" title="Title">https://github.com/liaohuqiu/leakcanary-demo</a></p>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/leakcannei-xie-lu-jian-ce/">阅读全文</a>
    </footer>
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-04-03T16:05:02+08:00"  data-updated="true" itemprop="datePublished dateCreated">2015 年4 月3 日</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/gem-description/" itemprop="url">Gemfile 详解</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>前几天读到的一篇博客，觉得内容很详实，就翻译了下给大家分享下。绝大部分为直译，极少数地方加了点自己的注释，若有不周到地方，还望大家指出。如果有排版方面的问题，也请指出。</p>

<p>原文：<a href="http://tosbourn.com/what-is-the-gemfile/">http://tosbourn.com/what-is-the-gemfile/</a></p>

<p>作为Ruby开发者，我们一直在使用Gemfile，并且大部分人知道一些关于Gemfile的基础知识。在这篇文章里，我想更加深入到Gemfile里面去看看通过Gemfile所能做的一切。</p>

<h2 id="gemfile">什么是Gemfile</h2>

<p>Gemfile是我们创建的一个用于描述gem之间依赖的文件。gem是一堆Ruby代码的集合，它能够为我们提供调用。你的Gemfile必须放在项目的根目录下面， 这是Bundler的要求，对于任何的其他形式的包管理文件来说，这也是标准。这里值得注意的一点是Gemfile会被作为Ruby代码来执行。当在Bundler上下文环境中被执行的时能使我们访问一些方法，我们用这些方法来解释gem之间的require关系。</p>

</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/gem-description/">阅读全文</a>
    </footer>
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/posts/5">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/posts/3">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2018 - BryanFu<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/bhrigu123/abacus">abacus theme</a></span>.
  </small>
</p>

</div>
</footer>
    








<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
